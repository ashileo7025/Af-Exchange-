<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Change Password</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h1>AF Exchange</h1>

  <div class="card">
    <h2>Change Password</h2>

    <label>New Password</label>
    <input type="password" id="newPassword" placeholder="New password">

    <button class="btn" onclick="updateMyPassword()">Update Password</button>
  </div>

  <button class="btn" onclick="window.location.href='dashboard.html'">
    Back to Dashboard
  </button>
</div>

<!-- FIREBASE JS -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, updatePassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAbuH_r-QjjCD3G5E_oHdVrpR5-0M21Pmo",
    authDomain: "af---exchange.firebaseapp.com",
    projectId: "af---exchange",
    storageBucket: "af---exchange.firebasestorage.app",
    messagingSenderId: "42976263940",
    appId: "1:42976263940:web:8742baa4943128dbfa1a51"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.updateMyPassword = function () {
    const newPass = document.getElementById("newPassword").value;

    if (!newPass) {
      alert("New password likho");
      return;
    }

    updatePassword(auth.currentUser, newPass)
      .then(() => alert("Password successfully changed"))
      .catch(err => alert(err.message));
  }
</script>

</body>
</html>
